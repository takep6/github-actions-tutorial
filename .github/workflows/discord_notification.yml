name: Discord Notification

on:
  push:
    branches:
      - main
  pull_request:
    types: [closed]
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Send Discord notification on push
        if: github.event_name == 'push'
        uses: appleboy/discord-action@v1.2.0
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
          message: |
            ğŸš€ æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆãŒãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã¾ã—ãŸï¼
            ãƒªãƒã‚¸ãƒˆãƒª: ${{ github.repository }}
            ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ${{ github.event.head_commit.message }}
            ã‚³ãƒŸãƒƒãƒˆURL: ${{ github.event.head_commit.url }}
            by: ${{ github.actor }}
          username: GitHub Actions Bot
          color: "#00FF00" # ç·‘è‰²

      - name: Send Discord notification on pull request merged
        if: github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true
        uses: appleboy/discord-action@v1.2.0
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }} # Webhook URLå…¨ä½“ã‚’ä¸€ã¤ã®Secretã¨ã—ã¦ä¿å­˜ã—ã¦ã„ã‚‹å ´åˆ
          message: |
            ğŸ‰ ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãƒãƒ¼ã‚¸ã•ã‚Œã¾ã—ãŸï¼
            ã‚¿ã‚¤ãƒˆãƒ«: **${{ github.event.pull_request.title }}**
            URL: ${{ github.event.pull_request.html_url }}
            by: ${{ github.actor }}
          username: GitHub Actions Bot
          color: "#0000FF" # é’è‰²

      - name: Send Manual Discord notification
        if: github.event_name == 'workflow_dispatch'
        uses: appleboy/discord-action@v1.2.0
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
          message: |
            æ‰‹å‹•ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸï¼
            å®Ÿè¡Œè€…: ${{ github.actor }}
          username: Manual Trigger Bot
          color: "#FFA500" # ã‚ªãƒ¬ãƒ³ã‚¸è‰²
